<!DOCTYPE HTML>
<html  xmlns:th="http://www.thymeleaf.org">
<head th:include="_meta :: header">
    <meta data-n-head="true" charset="utf-8"/>
    <meta data-n-head="true" name="viewport" content="width=device-width, initial-scale=1"/>
    <meta data-n-head="true" data-hid="keywords" name="keywords" content="方案设计、设计业务、建筑设计、互联网设计院、建筑众包"/>
    <meta data-n-head="true" data-hid="description" name="description" content="建筑众包拥有国内外顶尖的建筑设计、互联网、云计算和大数据等资源，为开发商、设计师、设计公司，建材供应、施工、项目管理等建筑产业各环节的用户，提供优质的合作共赢平台。"/>
    <title data-n-head="true">建筑众包--人工智能互联网设计院</title>
    <link data-n-head="true" rel="icon" type="image/x-icon" th:href="@{/favicon.ico.css}"href="favicon.ico.css" />
    <script data-n-head="true" th:src="@{/font/js/jquery.min.js}"src="font/js/jquery.min.js"></script>
    <script data-n-head="true" th:src="@{/font/js/index.js}"src="js/index.js"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/font/css/index.css}" href="font/css/index.css"/>
	<link rel="stylesheet" type="text/css" th:href="@{/font/css/information.css}"href="font/css/information.css"/>
	<link rel="stylesheet" type="text/css" th:href="@{/font/css/el.css}"href="font/css/el.css"/>
	<link rel="stylesheet" type="text/css" th:href="@{/font/css/project.css}" href="css/project.css"/>
	  <script type="text/javascript" th:src="@{/lib/layer/2.4/layer.js}" src="lib/layer/2.4/layer.js"></script>
 <script data-n-head="true" th:src="@{/js/common/layer.js}" src="js/common/layer.js"></script>

</head>
<body>
<style>
	#submit{
		width:15%;
	}
</style>
<article class="page-container" >
	<form class="form form-horizontal" id="form-purchase-add" action="#" th:action="@{/admin/projector/add}">
	<!-- <input type="hidden" name="save" value="true"/> -->

	<div class="row cl" style="margin-bottom:4%;margin-top:5%;">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>项目方名称：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="项目方名称" name="username" id="username" />
			
			<!-- <input type="hidden" class="input-text" placeholder="物料原始名称" name="oldName" id="oldName" th:each="leadingUser : ${leadingUser}" th:value="${leadingUser.getUsername()}"/>- -->
		</div>
	</div>
	
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>昵称：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="昵称" name="nickname" id="nickname" />
		</div>
	</div>
	
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>电话号码：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="电话号码" name="tel" id="tel" />
		</div>
	</div>
	
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>邮箱：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="邮箱" name="email" id="email" />
		</div>
	</div>
	<!--  
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>注册时间：</label>
		<div class="formControls col-xs-7 col-sm-5">
		<input type="text" onfocus="WdatePicker({el:$dp.$('time'),dateFmt:'yyyy-MM-dd'})" 
				autocomplete="off" value="" placeholder="注册时间" id="time" 
				name="time" class="input-text Wdate" readonly="readonly"/>
		</div>
	</div>
	
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>最近更新时间：</label>
		<div class="formControls col-xs-7 col-sm-5">
		<input type="text" onfocus="WdatePicker({el:$dp.$('update_time'),dateFmt:'yyyy-MM-dd'})" 
				autocomplete="off" value="" placeholder="最近更新时间" id="update_time" 
				name="update_time" class="input-text Wdate" readonly="readonly"/>
		</div>
	</div>
	-->
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>简介：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="简介" name="introduction" id="introduction" />
		</div>
	</div>
	
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>常用地区：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="常用地区" name="commonAddress" id="commonAddress" />
		</div>
	</div>
	
	<div class="row cl" style="margin-bottom:4%">
		
		
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>地区：</label>
		<!--  
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="地区" name="area" id="area" />
		</div>
		 -->
		
		
				
		   <div class="el-form-item__content" style="margin-left: 273px;">
				<div class="el-row">
				 <div class="el-col el-col-6">
				  <div class="el-input el-input--suffix"style="float:left;">
					  <select id="province" name="provinceId"class=" el-input__inner" >
						<option value="" disabled selected style='display:none;'>请选择省</option>
						<option th:each="pro:${provinces}" th:text="${pro.getName()}" 
					th:value="${pro.getProvinceId()}" >空</option>
			</select>
					
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				  </div>
				 </div>
				 <div class="el-col el-col-6" id="cityDiv">
				   <div class="el-input el-input--suffix" style="margin-left:10px;float:left; ">
					  <select class=" el-input__inner" id="city" name="cityId">
						<option value='' disabled selected style='display:none;'>请选择市</option>
					  </select> 
					<span id="cityRecord"  style="display:none"></span>
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				  </div>
				 </div>
				 <div class="el-col el-col-6" id="areaDiv">
				  <div class="el-input el-input--suffix" style="margin-left:10px;float:left;">
					  <select class=" el-input__inner" id="areaId" name="areaId">
						<option value='' disabled selected style='display:none;'>请选择县</option>
					  </select> 
					<span id="areaRecord"  style="display:none"></span>
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				  </div>
				 </div>
				</div>
			   </div>
		
		
		
		
		
		
		
		
		
	</div>
	
	<div style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>头像：</label>
		<!-- 
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="头像" name="photo" id="photo" />
		</div>
		
		........................
		
	    <div class="NameAndEmail clearfix">
				 <div class="Name">
					 <div class="el-form-item is-required">
						 <div class="el-form-item__content" style="margin-left: 125px;">
							 <div class="changeWidth el-input">
								 <input type="text" autocomplete="off" id="imgPath" class="el-input__inner"/>
								 <a href="javascript:void();" class="btn btn-primary upload-btn" style="line-height: 32px;"><i class="Hui-iconfont"></i> 浏览文件</a>
								 <input type="file" multiple="" name="image" id="image" class="input-file valid" style="height: 100%;">
							 </div>
						 </div>
					 </div>
				 </div>
		</div>

		-->



			<div class="formControls col-xs-7 col-sm-8" style="float:left;">
				<img id="changeimg" style ="height:30px;width:30px;"/>
				<input class="input-text upload-url" type="text"   readonly="" style="width:250px;height:33px;">
				<a href="javascript:void();" class="btn btn-primary upload-btn" onclick="document.getElementById('headImage').click()"><i class="Hui-iconfont"style="width:70px;height:30px;"></i> 浏览文件</a>
				<input type="file"  multiple="" name="headImage" id="headImage" class="input-file valid" style="z-index:-1;" onchange="changeImg()"/>
				
			</div>



	</div>
	<!-- 
	<div class="row cl" style="height:100%;width:100%">
			<label class="form-label col-xs-2 col-sm-2"><span class="c-red">*</span>封面</label>

	</div>
	 -->


		<div class="row cl" style="margin-bottom:4%">
			<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1" style="margin-top: 24px;"><span class="c-red">*</span>性别：</label>
			<div class="formControls col-xs-7 col-sm-5" style="margin-top: 22px;">
				<select id="sexType" name="sexType"  style="width:290px;height:35px;" class="text-input"  >
					<option value="">待选择</option>
					<option value="1">男</option>
					<option value="0">女</option>
				</select>
			</div>
		</div>
	
	
<!--	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>资质评分：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text" class="input-text" placeholder="资质评分" name="qualifyScore" id="qualifyScore" />
		</div>
	</div>-->
	
	<div class="row cl" style="display:none;margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>角色代码：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="text"readonly="readonly"  style="border:none;"class="input-text" value="1002" name="roleCode" id="roleCode" />
		</div>
	</div>
	
	
	<div class="row cl" style="margin-bottom:4%">
		<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>密码：</label>
		<div class="formControls col-xs-7 col-sm-5">
			<input type="password" class="input-text" placeholder="用户密码" name="password" id="password" />
		</div>
	</div>
	
	<div class="row cl">
		<div class="col-xs-3 col-sm-3 col-xs-offset-4 col-sm-offset-5" id = "submit">
			<input class="btn btn-primary radius" id="subbtn" type="submit" value="&nbsp;&nbsp;提交&nbsp;&nbsp;"/>
		</div> 
		<div class="col-xs-3 col-sm-2">
			<input class="btn radius" id="reset" type="button" value="&nbsp;&nbsp;重置&nbsp;&nbsp;"/>
		</div>
	</div>
	</form>
</article>

<!--_footer 作为公共模版分离出去--> 
<div th:replace="_footer :: footerjs"></div>
 <!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/jquery.validate.js}" src="lib/jquery.validation/1.14.0/jquery.validate.js"></script> 
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/validate-methods.js}" src="lib/jquery.validation/1.14.0/validate-methods.js"></script> 
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/messages_zh.js}"  src="lib/jquery.validation/1.14.0/messages_zh.js"></script> 
<script type="text/javascript" th:src="@{/lib/My97DatePicker/4.8/WdatePicker.js}"  src="lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript">
$(function(){
	
	$("#form-purchase-add").validate({
		rules:{
			tel:{
				required:true,
				isMobileNum:true,
			},
			email:{
				required:true,
				email:true,
			},
			commonAddress:{
				required:true,
			},
			introduction:{
				required:true,
			},
			photo:{
				required:true,
			},
			headImage:{
				required:true,
			},
			area:{
				required:true,
			},
			createTime:{
				required:true,
			},
			nickname:{
				required:true,
			},
			password:{
				required:true,
			},
			updateTime:{
				required:true,
			},
			username:{
				required:true,
			},
			roleCode:{
				required:true,
			},
			sexType:{
				required:true,
			},
			qualifyScore:{
				required:true,
				number:true,
				range:[0,10],
				min: 0.01, // 输入的数字最小值为0.01，不能为0或者负数
				minNumber: $("#qualifyScore").val() //调用自定义验证
			},
		},
		onkeyup:false,
		success:"valid",
		
		submitHandler:function(form){
			$(form).ajaxSubmit({
				type: 'post',
				url: "/admin/projector/add" ,
				success: function(data){
					if(data.code == "000000"){
						//禁止重复提交
						$('#subbtn').attr("type","button");
						layer.msg('添加成功!',{icon:1,time:1000},function(){
							var index = parent.layer.getFrameIndex(window.name);
							parent.location.reload();
							parent.layer.close(index); 
						});
					}else{
						layer.msg(data.message,{icon:5,time:1000});
					}
				},
                error: function(XmlHttpRequest, textStatus, errorThrown){
					layer.msg('error!',{icon:5,time:1000});
				}
			});
		
		}
	});
});

//自定义validate验证输入的数字小数点位数不能大于两位
jQuery.validator.addMethod("minNumber",function(value, element){
    var returnVal = true;
    inputZ=value;
  //截取字符串
    var ArrMen= inputZ.split("."); 
    if(ArrMen.length==2){
    	//判断小数点后面的字符串长度
        if(ArrMen[1].length>2){ 
            returnVal = false;
            return false;
        }
    }
    return returnVal;
},"小数点后最多为两位");         //验证错误信息

/*自定义验证手机号码*/
jQuery.validator.addMethod("isMobileNum", function(value, element) {    
    var length = value.length;    
    return this.optional(element) || (length == 11 && /^(((13[0-9]{1})|(14[0-9]{1})|(15[0-35-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(value));    
  }, "手机号码格式不正确。");


/**
 * 重置
 */
$('#reset').on('click',function(){
	$('.input-text').val("");
});


var result;
//选择省份事件
$("#province").change(function() {
	//先清空城市和区
	$("#city").empty();
	$("#areaId").empty();
	$('#city').append("<option value=''>待选择</option>");
	$('#areaId').append("<option value=''>待选择</option>");
	if($("#province").val()==""){
		//啥都不做
	}else{
		chooseDic("province",$("#province").val());
		var flag = false;
		if(result.length != 0){
			$('#cityDiv').css("display","inline");
			for (i in result){
				$('#city').append("<option value='"+result[i].cityId+"'>"+result[i].name+"</option>");
			}
		}else{
			$('#cityDiv').css("display","none");
			$('#areaDiv').css("display","none");
		}
	}
});
//选择城市事件
$("#city").change(function() {
	//先清空规格
	$("#areaId").empty();
	$('#areaId').append("<option value=''>待选择</option>");
	if($("#city").val()==""){
		//啥都不做
	}else{
		chooseDic("city",$("#city").val());
		if(result.length != 0){
			$('#areaDiv').css("display","inline");
			for (i in result){
				$('#areaId').append("<option value='"+result[i].areaId+"'>"+result[i].name+"</option>");
			}
		}else{
			$('#areaDiv').css("display","none");
		}
	}
});
//选择下拉菜单时和后台要字典的交互方法
function chooseDic(who,code){
	var toServer={
		who : who,
		code : code,
	}
	//此处请求后台程序，下方是成功后的前台处理……
	$.ajax({
		type: 'POST',
		url: "/admin/projector/getareadic",
		dataType: 'json',
		data:toServer,
		async:false,
		success: function(data){
			//返回服务器返回的字典对象
			result = data;
			
		},
		error:function(data) {
			console.log("错误!");
		},
	});
}

//加载时请求回显省市区
$(function(){
	chooseDic("province",$("#province").val());
	for (i in result){
		$('#city').append("<option value='"+result[i].cityId+"'>"+result[i].name+"</option>");
		$('#city').val($('#cityRecord').text());
	}
	chooseDic("city",$("#city").val());
	for (i in result){
		$('#areaId').append("<option value='"+result[i].areaId+"'>"+result[i].name+"</option>");
		$('#areaId').val($('#areaRecord').text());
	}
});
function changeImg(){
	var reads = new FileReader();
	f = document.getElementById('headImage').files[0];
	reads.readAsDataURL(f);
	reads.onload = function(e) {
		document.getElementById('changeimg').src = this.result;
	};
}

</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>