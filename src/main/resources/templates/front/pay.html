<!DOCTYPE HTML>
<html  xmlns:th="http://www.thymeleaf.org">
<!--<head th:include="_meta :: header">-->
  <meta data-n-head="true" charset="utf-8" />
  <meta data-n-head="true" name="viewport" content="width=device-width, initial-scale=1" />
  <meta data-n-head="true" data-hid="keywords" name="keywords" content="方案设计、设计业务、建筑设计、互联网设计院、建筑众包" />
  <meta data-n-head="true" data-hid="description" name="description" content="建筑众包拥有国内外顶尖的建筑设计、互联网、云计算和大数据等资源，为开发商、设计师、设计公司，建材供应、施工、项目管理等建筑产业各环节的用户，提供优质的合作共赢平台。" />
  <title data-n-head="true">建筑众包--人工智能互联网设计院</title>
  <link data-n-head="true" rel="icon" type="image/x-icon" th:href="@{/font/favicon.ico.css}" href="favicon.ico.css" />
  <script data-n-head="true" th:src="@{/font/js/jquery.min.js}" src="js/jquery.min.js"></script>
  <script data-n-head="true" th:src="@{/font/js/index.js}" src="js/index.js"></script>
  <link rel="stylesheet" type="text/css" th:href="@{/font/css/index.css}" href="css/index.css">
  <link rel="stylesheet" type="text/css" th:href="@{/font/css/el.css}" href="css/el.css">
 <link rel="stylesheet" type="text/css" th:href="@{/font/css/forgotpwd.css}" href="css/forgotpwd.css">
</head>
<body>
<style>
	#submit{
		width:15%;
	}
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
    }
    input[type="number"]{
        -moz-appearance: textfield;
    }
	.el-form-item{
		margin-bottom: 0px;
	}
</style>
<article class="page-container" style="border:1px solid #eee;width:50%;height:auto;margin-left:auto;margin-right:auto;margin-top:5%;border-radius: 5px;padding: 10px;">
	<form class="form form-horizontal" id="payform" action="#" th:action="@{/front/pay/payforproject}">
		<!-- <input type="hidden" name="save" value="true"/> -->
<!--		<div class="row cl" style="margin-bottom:4%;margin-top:5%;">
			<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>项目名称：</label>
			<div class="formControls col-xs-7 col-sm-5">
				<input type="text" class="input-text"style="border:none;" readonly="readonly"name="projectname" id="projectname"  th:value="${projectDetail.getName()}"/>
				<input type="hidden" class="input-text" placeholder="项目ID" name="projectId" id="projectId" th:value="${projectDetail.getId()}"/>
			</div>
		</div>-->
		<!--<div class="el-form-item is-required" data-v-c89a40f6="">-->
			<!--<label  class="el-form-item__label" style="width:100px;">项目名称：</label>-->
			<!--<div class="el-form-item__content" style="margin-left:100px;">-->
				<!--<div class="el-input" data-v-c89a40f6="">-->
					<!--<input type="text" class="el-input__inner"style="border:none;" readonly="readonly"name="projectname" id="projectname"  th:value="${projectDetail.getName()}"/>-->
					<!--<input type="hidden" class="input-text" placeholder="项目ID" name="projectId" id="projectId" th:value="${projectDetail.getId()}"/>-->
				<!--</div>-->
			<!--</div>-->
		<!--</div>-->
		<div class="el-form-item is-required" id="1" data-v-c89a40f6="">
			<label  class="el-form-item__label" style="width:140px;">项目名称：</label>
			<div class="el-form-item__content" style="margin-left:140px;">
				<div class="el-input" data-v-c89a40f6="">
					<input type="text" class="el-input__inner"style="border:none;" readonly="readonly"name="projectname" id="projectname"  th:value="${projectDetail.getName()}"/>
					<input type="hidden" class="input-text" placeholder="项目ID" name="projectId" id="projectId" th:value="${projectDetail.getId()}"/>
				</div>
			</div>
		</div>
<!-- 
		<div class="row cl" style="margin-bottom:4%">
			<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>设计总预算：</label>
			<div class="formControls col-xs-7 col-sm-5">
				<input  style="border:none;" readonly="readonly" class="input-text" name="designbudget" id="designbudget"  th:value="${projectDetail.getDesignBudget()}"/>
			</div>
		</div>
 -->
		<div class="el-form-item is-required" id="1" data-v-c89a40f6="" th:if="${money.getWaterMoney()!=null}">
			<label  class="el-form-item__label" style="width:140px;">水设计师薪酬：</label>
			<div class="el-form-item__content" style="margin-left:140px;">
				<div class="el-input" data-v-c89a40f6="">
					<input  type="number"  readonly="readonly" class="el-input__inner" style="border:none;"name="water_money" id="water_money" th:value="${money.getWaterMoney()}" />
					<input  class="el-input__inner"style="display:none;"  name="waterUserId" id="waterUserId" th:value="${waterUserId}"/>
					<input  class="el-input__inner" style="display:none;"name="waterBalance" id="waterBalance" th:value="${waterBalance}"/>
				</div>
			</div>
		</div>
		<div class="el-form-item is-required" id="2" data-v-c89a40f6="" th:if="${money.getWarmMoney()!=null}">
			<label  class="el-form-item__label" style="width:140px;">暖设计师薪酬：</label>
			<div class="el-form-item__content" style="margin-left:140px;">
				<div class="el-input" data-v-c89a40f6="">
					<input type="number" readonly="readonly" class="el-input__inner" style="border:none;"name="warm_money" id="warm_money" th:value="${money.getWarmMoney()}" />
					<input  class="el-input__inner"style="display:none;"name="warmUserId" id="warmUserId" th:value="${warmUserId}"/>
					<input class="el-input__inner"  style="display:none;" name="warmBalance" id="warmBalance" th:value="${warmBalance}"/>
				</div>
			</div>
		</div>

		<div class="el-form-item is-required" id="3" data-v-c89a40f6="" th:if="${money.getStructureMoney()!=null}">
			<label  class="el-form-item__label" style="width:140px;">结构设计师薪酬：</label>
			<div class="el-form-item__content" style="margin-left:140px;">
				<div class="el-input" data-v-c89a40f6="">
					<input type="number"  readonly="readonly" class="el-input__inner"style="border:none;" name="structure_money" id="structure_money" th:value="${money.getStructureMoney()}"  />
					<input class="el-input__inner" style="display:none;"name="structureUserId" id="structureUserId" th:value="${structureUserId}"/>
					<input  class="el-input__inner"  style="display:none;" name="structureUserBalance" id="structureUserBalance" th:value="${structureBalance}"/>
				</div>
			</div>
		</div>
		<div class="el-form-item is-required" id="4" data-v-c89a40f6="" th:if="${money.getElectricityMoney()!=null}">
			<label  class="el-form-item__label" style="width:140px;">电设计师薪酬：</label>
			<div class="el-form-item__content" style="margin-left:140px;">
				<div class="el-input" data-v-c89a40f6="">
					<input type="number"readonly="readonly"  class="el-input__inner" style="border:none;"name="electricity_money" id="electricity_money" th:value="${money.getElectricityMoney()}"/>
					<input  class="el-input__inner" style="display:none;"name="electricityUserId" id="electricityUserId" th:value="${electricityUserId}"/>
					<input  class="el-input__inner"style="display:none;"  name="electricityBalance" id="electricityBalance" th:value="${electricityBalance}"/>
				</div>
			</div>
		</div>
		<div class="el-form-item is-required" id="5" data-v-c89a40f6="" th:if="${money.getBuildingMoney()!=null}">
			<label  class="el-form-item__label" style="width:140px;">建筑设计师薪酬：</label>
			<div class="el-form-item__content" style="margin-left:140px;">
				<div class="el-input" data-v-c89a40f6="">
					<input type="number"  readonly="readonly"  class="el-input__inner" style="border:none;" name="building_money" id="building_money" th:value="${money.getBuildingMoney()}" />
					<input class="el-input__inner"  style="display:none;"name="buildingUserId" id="buildingUserId" th:value="${buildingUserId}"/>
					<input  class="el-input__inner" style="display:none;" name="buildingBalance" id="buildingBalance" th:value="${buildingBalance}"/>
				</div>
			</div>
		</div>
		<div class="el-form-item is-required" data-v-c89a40f6="">
			<label  class="el-form-item__label" style="width:140px;">本阶段支付总额：</label>
			<div class="el-form-item__content" style="margin-left:155px;">
				<div class="el-input" data-v-c89a40f6="">
					<input type="text" readonly="readonly"  class="el-input__inner" style="border:none;width:250px;"name="sum" id="sum"th:if="${projectDetail.getStageCode()==1000}" th:value="${projectDetail.getDesignBudget()}" />
					<input type="text" readonly="readonly"  class="el-input__inner" style="border:none;width:250px;"name="sum" id="sum"th:if="${projectDetail.getStageCode()==1001}" th:value="${projectDetail.getPlanBudget()}" />
				</div>
			</div>
		</div>
		<!--<div class="row cl" style="margin-bottom:4%">-->
			<!--<label class="form-label col-xs-4 col-sm-3 col-sm-offset-1"><span class="c-red">*</span>本阶段支付总金额：</label>-->
			<!--<div class="formControls col-xs-7 col-sm-5">-->
				<!--<input type="text" readonly="readonly"  class="input-text" style="border:none;width:250px;"name="sum" id="sum"th:if="${projectDetail.getStageCode()==1000}" th:value="${projectDetail.getDesignBudget()}" />-->
				<!--<input type="text" readonly="readonly"  class="input-text" style="border:none;width:250px;"name="sum" id="sum"th:if="${projectDetail.getStageCode()==1001}" th:value="${projectDetail.getPlanBudget()}" />-->
			<!--</div>-->
		<!--</div>-->
		
		
		<!-- 
		用表格显示
		<table class="table table-border table-bordered table-bg">
			<thead>

				<tr class="text-c" >
					<th width="10%">设计师类别</th>
					<th width="10%">设计师</th>
					<th width="10%">薪酬</th>
					
				</tr>
			</thead>
			<tbody>
				<tr class="text-c" th:each="pro:${projectPayForms}">
					<td th:text="${pro.getTypeCode()}"></td>
					<td th:text="${pro.getUserId()}"></td>
					<td><input  th:value="" name="${pro.typeCode}" id="salary" /></td>
				</tr>		
			</tbody>
		</table>
		
		
		
		 -->
		<div class="el-form-item is-required" data-v-c89a40f6="">
			<div id="submit" style="width: 50%;float: left;text-align: center">
				<input class="el-button el-button--success el-button--medium" id="subbtn" type="submit" value="&nbsp;&nbsp;支付&nbsp;&nbsp;"/>
			</div>
			<div style="width: 50%;float: right;text-align: center">
				<input class="el-button el-button--danger el-button--medium" id="reset" type="button" value="&nbsp;&nbsp;取消&nbsp;&nbsp;"/>
			</div>

		</div>


	</form>
</article>

<!--_footer 作为公共模版分离出去--> 
<div th:replace="_footer :: footerjs"></div>
 <!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->

<script type="text/javascript" th:src="@{/lib/My97DatePicker/4.8/WdatePicker.js}"  src="lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" th:src="@{/lib/jquery/1.9.1/jquery.min.js}"></script> 
<script type="text/javascript" th:src="@{/lib/layer/2.4/layer.js}"></script>
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/jquery.validate.js}"></script>
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/validate-methods.js}"></script>
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/messages_zh.js}"></script>
<script type="text/javascript" th:src="@{/h-ui/js/H-ui.min.js}"></script>
<script type="text/javascript" th:src="@{/h-ui.admin/js/H-ui.admin.js}"></script> 
<script type="text/javascript" th:inline="javascript">



$(function(){
	$("#payform").validate({
		rules:{
			
		},
	onkeyup:false,
	   success:"valid",
		submitHandler:function(form){
			$(form).ajaxSubmit({
				type: 'post',
				url: "/front/pay/payforproject" ,
				success: function(data){
					if(data.code == "000000"){
						//禁止重复提交
						$('#subbtn').attr("type","button");
						layer.msg('支付成功!',{icon:1,time:1000},function(){
							setTimeout(function(){  // 使用  setTimeout（）方法设定定时500毫秒
					    	    var index = parent.layer.getFrameIndex(window.name);
								parent.location.href='/center/myProject';
								parent.layer.close(index); 
					      },500);
							// toPass();
						});
						
					}else{
						layer.msg(data.message,{icon:5,time:1000});
					}
				},
                error: function(XmlHttpRequest, textStatus, errorThrown){
					layer.msg('支付失败!',{icon:5,time:1000});
				}
			});
		}
	});
});

function toPass(projectId){
	$.ajax({
	    type: 'POST',
	    url: "/center/frontstage/throughapplication?id="+"${projectDetail.getId()}",
	    data : {
            id :projectId
        },
        async:false,
	    success: function(data){
	     if(data.code == "000000"){
	      setTimeout(function(){  // 使用  setTimeout（）方法设定定时500毫秒
	    	    var index = parent.layer.getFrameIndex(window.name);
				parent.location.href='/center/myProject';
				parent.layer.close(index); 
	      },500);
	     }
	    },
	    error:function(data) {
	     console.log(data.msg);
	    },
	   });

};
//自定义validate验证输入的数字小数点位数不能大于两位
jQuery.validator.addMethod("minNumber",function(value, element){
    var returnVal = true;
    inputZ=value;
  //截取字符串
    var ArrMen= inputZ.split("."); 
    if(ArrMen.length==2){
    	//判断小数点后面的字符串长度
        if(ArrMen[1].length>2){ 
            returnVal = false;
            return false;
        }
    }
    return returnVal;
},"小数点后最多为两位");         //验证错误信息


/**
 * 重置a
 */
$('#reset').on('click',function(){
	var index = parent.layer.getFrameIndex(window.name);
	parent.layer.close(index); 
});

 
</script> 
<!--/请在上方写此页面业务相关的脚本-->
</body>
<script>
/** 
 * 实时计算总金额
 */
 /*
window.onload = function(){
    var inputs = document.getElementsByTagName("input");
    for(i=0;i<inputs.length;i++){
        inputs[i].onblur = function(){
            var add1 = document.getElementById("water_money").value;
            var add2 = document.getElementById("building_money").value;
            var add3 = document.getElementById("electricity_money").value;
            var add4 = document.getElementById("structure_money").value;
            var add5 = document.getElementById("warm_money").value;	
            document.getElementById("sum").value = add1*1 + add2*1+add3*1+add4*1+add5*1;
        }
    }   
}*/



</script>
</html>