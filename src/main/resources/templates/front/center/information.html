<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="front/common/_meta :: header"/>
<head>
    <meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no">
	<link rel="stylesheet" th:href="@{/layui/css/layui.css}" media="all" />
    <link data-n-head="true" rel="icon" type="image/x-icon" th:href="@{/favicon.ico.css}"href="favicon.ico.css" />
    <script data-n-head="true" th:src="@{/font/js/jquery.min.js}"src="font/js/jquery.min.js"></script>
    <script data-n-head="true" th:src="@{/font/js/index.js}"src="js/index.js"></script>
	<link rel="stylesheet" type="text/css" th:href="@{/font/css/information.css}"href="font/css/information.css"/>
	<link rel="stylesheet" type="text/css" th:href="@{/font/css/el.css}"href="font/css/el.css"/>
	 <script type="text/javascript" th:src="@{/lib/layer/2.4/layer.js}" src="lib/layer/2.4/layer.js"></script>

 	<script data-n-head="true" th:src="@{/js/common/layer.js}" src="js/common/layer.js"></script>
	<style>
 	input.error{
 		background-color: #fbe2e2;
	    border-color: #c66161;
	    color: #c00;
 	}
 	#nickname-error{
	  font-size:9px;
	  color:red;
	  position: absolute;
	  right:10px;
	}
 </style>
</head>
<body>
  <div id="__nuxt"> 
   <div class="nuxt-progress" style="width:0%;height:2px;background-color:#3B8070;opacity:0;"></div> 
   <div id="__layout"> 
  	 <div>
   		<div>
       		 <!-- 公共顶部header -->
           	 <header th:include="front/common/_header :: header" class="header" data-v-8e52717c></header>
       		<!-- 公共导航 -->
          	 <nav th:include="front/common/_nav :: nav" class="nav_index" data-v-bdccf15a></nav>
      <div class="membar" data-v-24a6dbce="" th:include="front/center/_nav :: nav">
       <ul data-v-24a6dbce=""> 
        <li data-v-24a6dbce=""> <a href="project.htm" data-v-24a6dbce=""> 我的项目 </a> </li> 
        <li class="check" data-v-24a6dbce=""> <a href="information.htm" data-v-24a6dbce=""> 个人信息 </a> </li> 
        <li data-v-24a6dbce=""> <a href="auth.htm" data-v-24a6dbce=""> 实名认证 </a> </li> 
        <li data-v-24a6dbce=""> <a href="wallet.htm" data-v-24a6dbce=""> 我的账户 </a> </li> 
        <li data-v-24a6dbce=""> <a href="myNew.htm" data-v-24a6dbce=""> 我的消息 </a> </li> 
       </ul> 
      </div> 
      <div id="MyPersonalBasicNews"> 
       <div class="container"> 
        <h2>基础信息</h2> 
        <div class="basicNews"> 
         <div class="content clearfix"> 
          <div class="headerPic"> 
           <img th:src="${leadingUser.getPhoto()}" alt="" width="128" height="128" data-v-27298642="" /> 
          </div> 
          <div class="perNews"> 
           <div class="name clearfix"> 
            <h3 style="float:left;"th:text="*{leadingUser.getNickname()}"></h3>
            <div style="float:left;"> 
             <img th:src="@{/font/images/icon_designer.efb9c3b.png}" alt="" class="el-tooltip item" style="margin-right:4px;" /> 
             <img th:src="@{/font/images/icon_unsigned.4a1e8a8.png}" alt="" class="el-tooltip item" style="margin-right:4px;" /> 
            </div> 
           </div> 
           <div class="PhoneAndEmail"> 
		    <div class="Phone"> 
             <img th:src="@{/font/images/icon_phone.10fd940.png}" alt="" /> 
             <span style="color:#838793;font-size:16px;">手机：</span> 
             <span  style="color:#353947;font-size:16px;" th:text="*{leadingUser.getTel()}"></span> 
            </div> 
            <div class="Email"> 
             <img th:src="@{/font/images/icon_mail.afe4837.png}" alt="" /> 
             <span style="color:#838793;font-size:16px;">邮箱：</span> 
             <span class="hintContent"th:text="*{leadingUser.getEmail()}"></span> 
            </div> 
           </div> 
           <div class="location"> 
            <img th:src="@{/font/images/icon_address.567c196.png}" alt="" />
            <span style="color:#838793;font-size:16px;">所在城市：</span> 
            <span class="hintContent" th:text="*{address}"></span> 
           </div> 
          </div> 
         </div> 
         <div class="intro">
           个人简介： 
          <span class="hintContent"><img th:src="@{/font/images/icon_plaint.11e7f3a.png}" alt="" class="hintPic" th:text="${introduction}" /></span> 
        <!--   <span class="hintContent"><img th:src="@{font/images/icon_plaint.11e7f3a.png}" alt="" class="hintPic" />完善个人简介，让更多人了解您！</span>  -->
         </div> 
         <div class="hoverShow"></div> 
        </div> 
        
         <!-- 修改基本信息 -->
         
		<div class="changeBasic" style="display:none;">
		
		<!--    <form    method= "post" action="#" th:action="@{/center/informationupdate}"  style="width: 100%;" enctype="multipart/form-data"> -->
		   <form class=" el-form demo-ruleForm " id="form-information-change" method= "post" enctype="multipart/form-data" action="#" th:action="@{/center/informationupdate}"  style="width: 100%;">
			<div class="clearfix">
			 <div class="headerPic">
				 <img style="z-index: 2" />
			  <div class="el-form-item">
			   <div class="el-form-item__content" style="margin-left: 125px;">
				<div style="width: 128px; height: 128px; border: 1px solid rgb(191, 203, 217); position: relative;">
				 <div class="avatar-uploader">
				  <div tabindex="0" class="el-upload el-upload--text" style="float:left;">
					 <img id="changeimg" th:src="${leadingUser.getPhoto()}" style="width:128px; height:128px;"/>
				  	 <div class="clickChange">
					<input type='button' class='btn' id="changeHeadImage"value='修改头像'onclick="document.getElementById('headImage').click()" style="margin-top:20px;display:none;"/>
					<input type='text' id='textfield' placeholder="修改图片"style="border:none;text-align:center;"class='txt' />
				   </div>
				   <input type="file" name="headImage" id="headImage" class="el-upload__input" style="filter:alpha(opacity:0);opacity: 0;width:0px ;"size="28" onchange="changeImg()"/>
				 <!-- 
				 		上传头像用的到input框
				  <input type='text' id='textfield' class='txt' />
				  <input type='button' class='btn' value='浏览...'onclick="document.getElementById('fileField').click()" />
    			  <input style="filter:alpha(opacity:0);opacity: 0;width:0px ;" type="file" id="fileField"class="file" size="28" onchange="document.getElementById('textfield').value=this.value" />

				  -->
				  </div>
				 </div>
				</div>
			   </div>
			  </div>
			 </div>
			 
			 <div class="content">
			  <div class="NameAndEmail clearfix">
			   <div class="Name">
				<div class="el-form-item is-required">
				 <label for="name" class="el-form-item__label" style="width: 125px;">昵 称</label>
				 <div class="el-form-item__content" style="margin-left: 125px;">
				  <div class="changeWidth el-input widthContro">
				   <input type="text" autocomplete="off" class="el-input__inner" id="nickname" name="nickname" style="width:150px;" th:value="${leadingUser.getNickname()}" />
				  </div>
				 </div>
				</div>
			   </div>
			   <div class="Email">
				<div class="el-form-item is-required">
				 <label for="email" class="el-form-item__label" style="width: 125px;">邮 箱</label>
				 <div class="el-form-item__content" style="margin-left: 125px;">
				  <div class="changeWidth el-input">
				   <input type="text" autocomplete="off" class="el-input__inner" id="email" name="email" th:value="${leadingUser.getEmail()}" />
				  </div>
				 </div>
				</div>
			   </div>
			  </div>
			  <div class="el-form-item is-required">
			   <label for="province" class="el-form-item__label" style="width: 125px;">所在城市</label>
			  <!--<img  src="/background/static/upload/test1.jpg" style="width:128px; height:128px;"/>-->
			   <div class="el-form-item__content" style="margin-left: 125px;">
				<div class="el-row">
				 <div class="el-col el-col-6">
				  <div class="el-input el-input--suffix">
					  <select id="province" name="provinceId"class=" el-input__inner" >
						<option value="" disabled selected style='display:none;'>请选择省</option>
						<!-- 
						<option th:each="pro:${provinces}" th:text="${pro.getName()}" 
						th:value="${pro.getProvinceId()}" th:selected="${projectorForm.provinceId eq pro.getProvinceId()}">空</option> 
						 -->
						<option th:each="pro:${provinces}" th:text="${pro.getName()}" th:value="${pro.getProvinceId()}" 
							th:selected="${leadingUser.provinceId != null and leadingUser.provinceId.toString() eq pro.getProvinceId()}">空</option>
					</select>
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				  </div>
				 </div>
				 <div class="el-col el-col-6" id="cityDiv">
				   <div class="el-input el-input--suffix" style="margin-left:10px;">
					  <select class=" el-input__inner" id="city" name="cityId">
						<option value='' disabled selected style='display:none;'>请选择市</option>
					  </select> 
					<span id="cityRecord" th:text="${leadingUser.getCityId()}"style="display:none"></span>
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				  </div>
				 </div>
				 <div class="el-col el-col-6" id="areaDiv">
				  <div class="el-input el-input--suffix" style="margin-left:20px;">
					  <select class=" el-input__inner" id="areaId" name="areaId">
						<option value='' disabled selected style='display:none;'>请选择县</option>
					  </select> 
					<span id="areaRecord" th:text="${leadingUser.getArea()}" style="display:none"></span>
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				  </div>
				 </div>
				</div>
			   </div>
			  </div>
			  <div class="el-form-item">
			   <label for="description" class="el-form-item__label" style="width: 125px;">个人简介</label>
			   <div class="el-form-item__content" style="margin-left: 125px;">
				<div class="el-textarea">
				 <textarea rows="4" class="el-textarea__inner" id="introduction" name="introduction"style="min-height: 33px;"th:text="${introduction}"></textarea>
				</div>
			   </div>
			  </div>
			<!-- 
			
						  <div class="btn save" id="subbtn">
			   保存
			
			  </div>
			
			 -->
			   <input class="btn   save" id="subbtn" type="submit" value="&nbsp;&nbsp;保存&nbsp;&nbsp;"/>
			  <div class="btn cancel">
			   取消
			  </div>
			 </div>
			</div>
		   </form>
		</div>
	   </div> 
      </div> 
      
      
       <!-- 显示专业信息 -->
      <div id="MyPersonalMajorNews" style="diplay:none;" > 
       <div class="container" th:if="${leadingUser.getRoleCode()==1001}"> 
        <h2>专业信息</h2> 
        <div class="module"> 
         <h3>基本信息：</h3> 
         <div class="basic"> 
          <span>所属类别：</span>
          <span th:text="${type}"></span>
         <!-- 
         
          <span>1年工作经验</span>| 
          <span>初级工程师</span>      
         
          -->
         </div> 
		 <div class="hoverShow"></div>
        </div> 		
        
        <!-- 修改专业信息 -->
		<div class="changeBasic " style="display:none">
		   <form class="el-form demo-ruleForm" id="form-majorinformation-change" method= "post"enctype="multipart/form-data" action="#" th:action="@{/center/majorinformationupdate}">
			<div class="clearfix">
			 <div style="float: left;">
			  <div class="el-form-item is-required">
			   
			  <!--  
			   <label for="majorList" class="el-form-item__label" style="width: 200px;">所属工种：</label>
			   -->
			   <div class="el-form-item__content" style="margin-left: 200px;">
				<!--  
				<div class="el-input el-input--suffix">
					  <select class="el-input__inner" style="width:150px;">
						<option value='' disabled selected style='display:none;'>请选择</option>
						<option value="1">水</option>
						<option value="2">暖</option>
						<option value="3">电</option>	
						<option value="4">建筑</option>	
						<option value="5">结构</option>							
					  </select> 
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				  </div>
				  
				  -->			  
				  <div>

					   <div class="layui-form-item"style="margin-left:-120px;">
							<label class="layui-form-label el-form-item__label"style="width:100px;">所属类别：</label>
							<!--  
							<input style="display:none;" name="majorinformation" id="majorinformation"></input>
							<div class="layui-input-block" id="tag_ids2">
							</div>
							-->
							<input type="checkbox" name="test" th:attr="checked=${building!=null}"th:value="1000"/><span>建筑</span>
							<input type="checkbox" name="test" th:attr="checked=${structure!=null}"th:value="1001"/><span>结构</span>
							<input type="checkbox" name="test" th:attr="checked=${water!=null}"th:value="1002"/><span>水</span>
							<input type="checkbox" name="test" th:attr="checked=${electricity!=null}"th:value="1003"/><span>电</span>
							<input type="checkbox" name="test" th:attr="checked=${warm!=null}"th:value="1004"/><span>暖</span>
							<input type="text" name="userid"style="display:none;" id="userid" th:value="${leadingUser.getId()}">
							<input type="text" style="display:none;" name="typecode" id="typecode">
					   </div>          
					<!-- 
					   <div class="layui-form-item" style="text-align:center;">
							<div class="layui-input-block">
							
							  <button type="button" class="layui-btn" lay-submit="" lay-filter="demo">console.log</button>
							 
							  <button type="reset" class="layui-btn layui-btn-primary">重置</button>
							</div>
					   </div>
					   -->
				 </div>
				  
				  
				  
				  
				  
				  
				  
			   </div>
			  </div>
			 </div>
			 <!--  
			 <div style="float: left;">
			  <div class="el-form-item is-required">
			   <label for="beginJob" class="el-form-item__label" style="width: 200px;">工作经验（年）：</label>
			    <div class="el-form-item__content" style="margin-left: 200px;">
				   <div class="el-input el-input--suffix">
					  <select class=" el-input__inner" style="width:150px;">
						<option value='' disabled selected style='display:none;'>请选择</option>
						<option value="1">1年</option>
						<option value="2">2年</option>	 
					  </select> 
					  <span class="el-input__suffix">
						<span class="el-input__suffix-inner">
							<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
						</span>
					  </span> 
				   </div>
			   </div>
		      </div>
			 </div>
			 
			 <div style="float: left;">
			  <div class="el-form-item is-required">
			   <label for="designerLevelId" class="el-form-item__label" style="width: 200px;">已获得职称：</label>
			   <div class="el-form-item__content" style="margin-left: 200px;">
				<div class="el-input el-input--suffix">
				  <select class=" el-input__inner" style="width:150px;">
					<option value='' disabled selected style='display:none;'>请选择</option>
					<option value="1">无</option>
					<option value="2">初级工程师</option>	 
					<option value="3">中级工程师</option>	
				  </select> 
				  <span class="el-input__suffix">
					<span class="el-input__suffix-inner">
						<i class="el-select__caret el-input__icon el-icon-arrow-down"></i>
					</span>
				  </span> 
			    </div>
			   </div>
			  </div>
			 </div>
			 
			 -->
			</div>
			<input class="changeBtn btn save" id="sub" type="button" onclick="show()"value="&nbsp;&nbsp;保存&nbsp;&nbsp;"/>
			<div class="changeBtn cancel">
			 取消
			</div>
		   </form>
		  </div>
       </div> 
      </div>
   			<!-- 公共底部 -->
     	  <div th:include="front/common/_footer :: footer" id="footer" data-v-407369c6 data-v-2a183b29></div>
       </div> 
      </div>  
   </div> 
  </div>
 </body>
 <!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/jquery.validate.js}" src="lib/jquery.validation/1.14.0/jquery.validate.js"></script> 
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/validate-methods.js}" src="lib/jquery.validation/1.14.0/validate-methods.js"></script> 
<script type="text/javascript" th:src="@{/lib/jquery.validation/1.14.0/messages_zh.js}"  src="lib/jquery.validation/1.14.0/messages_zh.js"></script>
 <script type="text/javascript" th:src="@{/lib/select/fSelect.js}" src="lib/select/fSelect.js"></script>
 <script type="text/javascript" th:src="@{/lib/My97DatePicker/4.8/WdatePicker.js}"  src="lib/My97DatePicker/4.8/WdatePicker.js"></script>
 <script th:src="@{/lib/jquery.validation/1.14.0/jquery.form.min.js}" src="lib/jquery.validation/1.14.0/jquery.form.min.js"></script>
<script charset="UTF-8" th:src="@{/layui/layui.js}"></script>
<script>

function show(){
	var isChecked = false;
    obj = document.getElementsByName("test");
    check_val = [];
    for(k in obj){
        if(obj[k].checked) {
            isChecked = true;
        }
    }
    if(!isChecked){
        layer.msg("请至少选择一项",{icon:5,time:2000});
        return;
	}
    for(k in obj){
        if(obj[k].checked) {
            check_val.push(obj[k].value);
        }
    }
	$('#typecode').val(check_val);
    $("#form-majorinformation-change").ajaxSubmit({
        type: 'post',
        url: "/center/majorinformationupdate",
        success: function(data){
            if(data.code == "000000"){
                layer.msg('修改成功!',{icon:1,time:1500},function(){
                    window.location.reload();
                });
            }else{
                layer.msg("error",{icon:5,time:2000});
            }
        },
        error: function(XmlHttpRequest, textStatus, errorThrown){
            layer.msg('失败!',{icon:5,time:2000});

        }
    });
    //alert(check_val);
}

	
	
	
	
  var tagData = [{"id":1000,"name":"建筑","status":0},{"id":1001,"name":"结构"},{"id":1002,"name":"水"},{"id":1003,"name":"电"},{"id":1004,"name":"暖"}];    
 // var catData = [{"id":1,"name":"周边旅游","children":[{"id":24,"name":"广东","status":0,"children":[{"id":7,"name":"广州"},{"id":23,"name":"潮州"}]}]},{"id":5,"name":"国内旅游","children":[{"id":8,"name":"华北地区","children":[{"id":9,"name":"北京"}]}]},{"id":6,"name":"出境旅游","children":[{"id":10,"name":"东南亚","children":[{"id":11,"name":"马来西亚","children":[{"id":20,"name":"沙巴","children":[{"id":21,"name":"美人鱼岛","children":[{"id":22,"name":"潜水"}]}]}]}]}]}];
 
 $(function(){
	 if('${leadingUser.getRoleCode()}'==1001)
	 {

		 layui.config({
			    base : '/js/'
			  }).extend({
			    selectN: 'layui_extends/selectN',
			    selectM: 'layui_extends/selectM',
			  }).use(['layer','form','jquery','selectN','selectM'],function(){
			    $ = layui.jquery;	
			    var form = layui.form
			    ,selectN = layui.selectN
			    ,selectM = layui.selectM;
			    //多选标签-所有配置
			    var tagIns2 = selectM({
			      //元素容器【必填】
			      elem: '#tag_ids2'    
			      //候选数据【必填】
			      ,data: tagData
			      //默认值
			      ,selected: [12] 			
			      //最多选中个数，默认5
						,max : 5  
						//input的name 不设置与选择器相同(去#.)
						,name: 'tag2'
						//值的分隔符
						,delimiter: ','
						//候选项数据的键名
						,field: {idName:'id',titleName:'name'}
			    });

				//function getValue={};		
			    form.on('submit(demo)',function (data){			   
			      var formData = data.field;
			      console.log('表单对象：',formData.tag2);
			      return formData.tag2;
				  alert(formData.tag2);
			    })
					//通过js动态选择
			    $('.set2').click(function(){
			      tagIns1.set([12,13,14,15]);
			    });

			    $('.fly').click(function(){
			      window.open('http://fly.layui.com/jie/26751/');
			    });

			    $('.mayun').click(function(){
			      window.open('https://gitee.com/moretop/layui-select-ext');
			    });	
					//监听重置按钮
					$('form').find(':reset').click(function(){
						$('form')[0].reset();
			      tagIns2.set();//默认值
						return false;
					});  
			  });
		 
	 }
	  
	 
 })
 

 $(function(){
    //切换基本信息编辑模式
	$(".hoverShow").on('click',function(){
		$(this).parent().hide();
		$(this).parent().siblings('.changeBasic').show();
		
		//校验基本信息
		$(function(){
			$("#form-information-change").validate({
				rules:{
					nickname:{
						required:true,
					},
					email:{
						required:true,
						email:true,
					},
				},
			    messages:{
			    	nickname:{
						required:"必填",
					},
			    },
				onkeyup:false,
				success:"valid",
				submitHandler:function(form){
					$(form).ajaxSubmit({
						type: 'post',
						url: "/center/informationupdate" ,
						success: function(data){
							if(data.code == "000000"){
								//禁止重复提交
								$('#subbtn').attr("type","button");
								layer.msg('修改成功!',{icon:1,time:1000},function(){
									var index = parent.layer.getFrameIndex(window.name);
									parent.location.reload();
									parent.layer.close(index); 
									 window.location.reload(true); 
								});
							}else{
								layer.msg('修改失败!',{icon:5,time:1000});
							}
						},
		                error: function(XmlHttpRequest, textStatus, errorThrown){
							layer.msg('修改失败!',{icon:5,time:1000});
						}
					});
				
				}
			});
		});
		
		// 校验专业
		$(function(){
			$("#form-majorinformation-change").validate({
				rules:{
					typecode:{
						required:true,
					},
				},
				messages: {
					typecode:{
						required:"请选择您的设计师类别",
					},
				},
				onkeyup:false,
				success:"valid",
				submitHandler:function(form){
					$(form).ajaxSubmit({
						type: 'post',
						url: "/center/majorinformationupdate" ,
						success: function(data){
							if(data.code == "000000"){
								//禁止重复提交
								$('#sub').attr("type","button");
								layer.msg('修改成功!',{icon:1,time:1000},function(){
									var index = parent.layer.getFrameIndex(window.name);
									parent.location.reload();
									parent.layer.close(index); 
									 window.location.reload(true); 
								});
							}else{
								layer.msg('修改失败!',{icon:5,time:1000});
							}
						},
		                error: function(XmlHttpRequest, textStatus, errorThrown){
							layer.msg('修改失败!',{icon:5,time:1000});
						}
					});
				
				}
			});
		});
		
	
		
	})
	$(".cancel").on('click',function(){
		$(this).parents('.changeBasic').prev().show();
		$(this).parents('.changeBasic').hide();
	})
	
	//点击修改头像
	$("#changeIco").on('click',function(){
		$('#changeHeadImage').trigger('click');
	})
	$("#textfield").on('click',function(){
		$('#changeHeadImage').trigger('click');
	})
	
 })

 var result;
 //选择省份事件
$("#province").change(function() {
	//先清空城市和区
	$("#city").empty();
	$("#areaId").empty();
	$('#city').append("<option value=''>待选择</option>");
	$('#areaId').append("<option value=''>待选择</option>");
	if($("#province").val()==""){
		//啥都不做
	}else{
		chooseDic("province",$("#province").val());
		var flag = false;
		if(result.length != 0){
			$('#cityDiv').css("display","inline");
			for (i in result){
				$('#city').append("<option value='"+result[i].cityId+"'>"+result[i].name+"</option>");
			}
		}else{
			$('#cityDiv').css("display","none");
			$('#areaDiv').css("display","none");
		}
	}
});
//选择城市事件
$("#city").change(function() {
	//先清空规格
	$("#areaId").empty();
	$('#areaId').append("<option value=''>待选择</option>");
	if($("#city").val()==""){
		//啥都不做
	}else{
		chooseDic("city",$("#city").val());
		if(result.length != 0){
			$('#areaDiv').css("display","inline");
			for (i in result){
				$('#areaId').append("<option value='"+result[i].areaId+"'>"+result[i].name+"</option>");
			}
		}else{
			$('#areaDiv').css("display","none");
		}
	}
});
//选择下拉菜单时和后台要字典的交互方法
function chooseDic(who,code){
	var toServer={
		who : who,
		code : code,
	}
	//此处请求后台程序，下方是成功后的前台处理……
	$.ajax({
		type: 'POST',
		url: "/center/getareadic",
		dataType: 'json',
		data:toServer,
		async:false,
		success: function(data){
			//返回服务器返回的字典对象
			result = data;
			
		},
		error:function(data) {
			console.log("错误!");
		},
	});
}
 
//加载时请求回显省市区
$(function(){
	chooseDic("province",$("#province").val());
	if(result.length != 0){
		$('#cityDiv').css("display","inline");
		for (i in result){
			$('#city').append("<option value='"+result[i].cityId+"'>"+result[i].name+"</option>");
		}
		$('#city').val($('#cityRecord').text());
	}else{
		$('#cityDiv').css("display","none");
		$('#areaDiv').css("display","none");
	}
	chooseDic("city",$("#city").val());
	if(result.length != 0){
		$('#areaDiv').css("display","inline");
		for (i in result){
			$('#areaId').append("<option value='"+result[i].areaId+"'>"+result[i].name+"</option>");
		}
		$('#areaId').val($('#areaRecord').text());
	}else{
		$('#areaDiv').css("display","none");
	}
}); 
 

//自定义validate验证输入的数字小数点位数不能大于两位
jQuery.validator.addMethod("minNumber",function(value, element){
    var returnVal = true;
    inputZ=value;
  //截取字符串
    var ArrMen= inputZ.split("."); 
    if(ArrMen.length==2){
    	//判断小数点后面的字符串长度
        if(ArrMen[1].length>2){ 
            returnVal = false;
            return false;
        }
    }
    return returnVal;
},"小数点后最多为两位");         //验证错误信息

/*自定义验证手机号码*/
jQuery.validator.addMethod("isMobileNum", function(value, element) {    
    var length = value.length;    
    return this.optional(element) || (length == 11 && /^(((13[0-9]{1})|(14[0-9]{1})|(15[0-35-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(value));    
  }, "手机号码格式不正确。");

function changeImg(){
	var reads = new FileReader();
	f = document.getElementById('headImage').files[0];
	reads.readAsDataURL(f);
	reads.onload = function(e) {
		document.getElementById('changeimg').src = this.result;
	};
}
 </script>
</html>
