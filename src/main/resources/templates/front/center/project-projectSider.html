<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="front/common/_meta :: header"/>
 <head>
  <link data-n-head="true" rel="icon" type="image/x-icon" href="favicon.ico.css" />
  <script data-n-head="true" th:src="@{/font/js/jquery.min.js}" src="js/jquery.min.js"></script> 
  <script data-n-head="true" th:src="@{/font/js/index.js}" src="js/index.js"></script>
  <link rel="stylesheet" type="text/css" th:href="@{/font/css/el.css}" href="css/el.css" /> 
  <link rel="stylesheet" type="text/css" th:href="@{/font/css/auth.css}" href="css/auth.css">
  <link rel="stylesheet" type="text/css" th:href="@{/font/css/my_project.css}" href="css/my_project.css">
    <style>
	#purRemarks{
		height:5em;
	}
	textarea{
		height:5em!important;
	}
	select{
		height:2.4em;
		border: solid 1px #ddd;
		width:100%;
	}
	.fs-wrap{
		width:100%;
		position:relative;
		top:8px;
	}
	.fs-label{
		height:1.4em;
		line-height:1.4em;
	}
	.fs-options{
		pointer-events:none;
	}
</style>
 </head> 
 <body data-n-head=""> 
  <div data-server-rendered="true" id="__nuxt">
   <div class="nuxt-progress" style="width:0%;height:2px;background-color:#3B8070;opacity:0;"></div>
   <div id="__layout">
    <div>
     <div data-v-d0b3a19c="">
      <!-- 公共顶部header -->
      <header th:include="front/common/_header :: header" class="header" data-v-8e52717c></header>
      <!-- 公共导航 -->
      <nav th:include="front/common/_nav :: nav" class="nav_index" data-v-bdccf15a></nav>
      <div class="asider" data-v-d0b3a19c="">
       <ul></ul>
      </div>
      <div class="membar" data-v-24a6dbce="" data-v-d0b3a19c="" th:include="front/center/_nav :: nav">
      <ul data-v-24a6dbce=""> 
        <li class="check" data-v-24a6dbce=""> <a href="project.htm" data-v-24a6dbce=""> 我的项目 </a> </li> 
        <li data-v-24a6dbce=""> <a th:href="@{/center/information}" data-v-24a6dbce=""> 个人信息 </a> </li> 
        <li data-v-24a6dbce=""> <a href="auth.htm" data-v-24a6dbce=""> 实名认证 </a> </li> 
        <li data-v-24a6dbce=""> <a href="wallet.htm" data-v-24a6dbce=""> 我的账户 </a> </li> 
        <li data-v-24a6dbce=""> <a th:href="@{/MessageMine/one}" data-v-24a6dbce=""> 我的消息 </a> </li> 
       </ul>
      </div>
      <div class="public" data-v-d0b3a19c="">
       <div class="container" data-v-d0b3a19c="">
       <form class="el-form el-form--inline" data-v-d0b3a19c="" th:action="@{/center/myProject}" method="post">
        <div class="issue_btn_left" data-v-d0b3a19c="">
          <div class="el-form-item" data-v-d0b3a19c="">
           <div class="el-form-item__content">
            <div class="el-select" data-v-d0b3a19c="">
             <div class="el-input el-input--suffix">
                <select name="typeCode" class="el-input__inner" style="width:150px;">
                <option value=''>请选择项目类型</option>
                <option th:each="option : ${typeList}" th:value="${option.code}" th:text="${option.description}" th:selected="${option.code == myProject.typeCode}" value="1">方案设计</option>
                </select> 
                <span class="el-input__suffix">
                <span class="el-input__suffix-inner">
                  <i class="el-select__caret el-input__icon el-icon-arrow-up"></i>
                </span>
                </span> 
             </div>
            </div>
           </div>
          </div>
          <div class="el-form-item" data-v-d0b3a19c="">
           <div class="el-form-item__content">
            <div class="el-select" data-v-d0b3a19c="">
             <div class="el-input el-input--suffix">
                <select name="processCode" class="el-input__inner" style="width:150px;">
                  <option value='' selected>请选择项目状态</option>
                  <option th:each="option : ${statusList}" th:value="${option.code}" th:text="${option.description}" th:selected="${option.code eq myProject.processCode}" value="1">发布中</option>
                </select> 
                <span class="el-input__suffix">
                  <span class="el-input__suffix-inner">
                    <i class="el-select__caret el-input__icon el-icon-arrow-up"></i>
                  </span>
                </span> 
             </div>
            </div>
           </div>
          </div>
          <div class="el-form-item" data-v-d0b3a19c="">
           <div class="el-form-item__content">
            <button type="submit" class="el-button el-button--success" style="margin-left:10px;" data-v-d0b3a19c="">
             <i class="el-icon-search"></i><span>查 询</span></button>
               <a th:href="@{/center/myProject}"><button type="button" class="el-button el-button--default" data-v-d0b3a19c=""><i class="el-icon-delete">
             </i><span>重 置</span></button></a>
                <a th:href="@{/center/myProject/toCreatProject}"><button type="button" class="el-button el-button--default" data-v-d0b3a19c="">
             <span>新建项目</span></button></a>
           </div>
          </div>
        </div>
        <div class="issue_btn" data-v-d0b3a19c="" style="width: 350px;">
         	<input type="text" rows="2" value="" th:value="${myProject.name}" class="el-input__inner el-input" name="name" placeholder="请输入项目名称" style="width: 69%;" />
         	<button type="submit" class="el-button el-button--success"  style="margin-left:10px;" data-v-d0b3a19c="">
            <i class="el-icon-search"></i><span>搜索</span></button>
        </div>
			<input th:type="hidden" name="pageNo" id="pageNum" th:value="${pageInfo.pageNum}"/>
	    	<input th:type="hidden" id="pages" th:value="${pageInfo.pages}"/>
        </form>
        <div class="containerBox" data-v-d0b3a19c="">
  <div data-v-d0b3a19c="" class="el-table el-table--fit el-table--enable-row-hover"  style="width: 100%;">
   <div class="hidden-columns">
    <div data-v-d0b3a19c=""></div>
    <div data-v-d0b3a19c=""></div>
    <div data-v-d0b3a19c=""></div>
    <div data-v-d0b3a19c=""></div>
    <div data-v-d0b3a19c=""></div>
    <div data-v-d0b3a19c=""></div>
   </div>
   <div class="el-table__header-wrapper">
    <table class="el-table__header" style="width: 1120px;" cellspacing="0" cellpadding="0" border="0">
     <colgroup>
      <col name="el-table_2_column_7" width="200" />
      <col name="el-table_2_column_8" width="130" />
      <col name="el-table_2_column_9" width="130" />
      <col name="el-table_2_column_10" width="130" />
      <col name="el-table_2_column_11" width="120" />
      <col name="el-table_2_column_12" width="400" />
      <col name="gutter" width="0" />
     </colgroup>
     <thead class="has-gutter">
      <tr class="">
       <th colspan="1" rowspan="1" class="el-table_2_column_7  is-center   is-leaf">
        <div class="cell">
         项目名称
        </div></th>
       <th colspan="1" rowspan="1" class="el-table_2_column_8  is-center   is-leaf">
        <div class="cell">
         项目阶段
        </div></th>
       <th colspan="1" rowspan="1" class="el-table_2_column_9  is-center   is-leaf">
        <div class="cell">
         项目状态
        </div></th>
       <th colspan="1" rowspan="1" class="el-table_2_column_10  is-center   is-leaf">
        <div class="cell">
         建筑类型
        </div></th>
       <th colspan="1" rowspan="1" class="el-table_2_column_11  is-center   is-leaf">
        <div class="cell">
         报名截止时间
        </div></th>
       <th colspan="1" rowspan="1" class="el-table_2_column_12  is-center   is-leaf">
        <div class="cell">
         操作
        </div></th>
       <th class="gutter" style="width: 0px; display: none;"></th>
      </tr>
     </thead>
    </table>
   </div>
   <div class="el-table__body-wrapper is-scrolling-none">
    <table class="el-table__body el-table--striped " style="width: 1120px;" cellspacing="0" cellpadding="0" border="0">
     <colgroup>
      <col name="el-table_2_column_7" width="200" />
      <col name="el-table_2_column_8" width="130" />
      <col name="el-table_2_column_9" width="130" />
      <col name="el-table_2_column_10" width="130" />
      <col name="el-table_2_column_11" width="120" />
      <col name="el-table_2_column_12" width="400" />
     </colgroup>
     <tbody>
      <tr th:each="project : ${pageInfo.list}" class="">
       <td colspan="1" rowspan="1" class="el-table_2_column_7  is-center   is-leaf">
        <div th:text="${project.name}" class="cell">
         公寓式酒店外立面设计
        </div></td>
       <td colspan="1" rowspan="1" class="el-table_2_column_8  is-center   is-leaf">
        <div th:text="${project?.stage}" class="cell">
         方案设计
        </div></td>
       <td colspan="1" rowspan="1" class="el-table_2_column_9  is-center   is-leaf">
        <div th:text="${project.status}" class="cell">
         已结束
        </div></td>
       <td colspan="1" rowspan="1" class="el-table_2_column_10  is-center   is-leaf">
        <div th:text="${project.type}" class="cell">
         景观
        </div></td>
       <td colspan="1" rowspan="1" class="el-table_2_column_11  is-center   is-leaf">
        <div th:text="${#strings.substring(project.deadline,0,10)}" class="cell" style="width:100px;">
         2019/01/02 23:59
        </div></td>
       <td colspan="1" rowspan="1" class="el-table_2_column_12  is-center   is-leaf">
        <div class="cell" style="float:left;">
            <a th:href="'/projectdetail/projector?id='+${project.id}" >
                <button type="button" class="el-button el-button--primary el-button--mini" style="margin: 2px 0;" data-v-d0b3a19c="">详情</button>
            </a>
         <!--<button type="button" class="el-button el-button&#45;&#45;success el-button&#45;&#45;mini"  style="margin-left:10px;" data-v-d0b3a19c="">待评价</button>-->
            <a title="修改项目 " th:if="${project.status == '审核不通过' || project.status == '审核通过' || project.status == '草稿'}" href="javascript:;" th:href="@{'/center/myProject/toUpdateProject/' + ${project.id}}">
                <button type="button" class="el-button el-button--primary el-button--mini" style="margin: 2px 0;" data-v-d0b3a19c="">修改</button>
            </a>
            <a th:href="'/application?projectId='+${project.id}" >
                <button type="button" class="el-button el-button--danger el-button--mini" style="margin: 2px 0;" th:if="${project.status == '已发布'}" data-v-d0b3a19c="">选定设计师</button>
            </a>
            <a th:if="${project.status != '审核不通过' && project.status != '审核通过' && project.status != '待审核' && project.status != '草稿'}" th:href="'/acceptlist?projectId='+${project.id}" >
                <button type="button" class="el-button el-button--danger el-button--mini" style="margin: 2px 0;" data-v-d0b3a19c="">查看设计师</button>
            </a>
           	<a th:href="'/center/frontstage/stageexamine?projectId='+${project.id}" th:if="${project.isPhaseAudit > 0}">
           		<button class="el-button el-button--mini" style="margin: 2px 0;" >阶段审核 </button>
           	</a>
           	<a title="发布" href="javascript:;" th:if="${project.getStausCode() eq 1002}"
			   th:onclick="'javascript:release(this,\'/center/myProject'+@{/changeprojectstatus}+'?which=1&projectId='+${project.id}+'\')'"
               style="text-decoration:none">
                <button class="el-button el-button--mini" style="margin: 2px 0;" >发布</button>
            </a>
           	<a title="开始建设" href="javascript:;" th:if="${project.showBeginBuild eq true}"
			   th:onclick="'javascript:beginBuild(this,\'/center/myProject'+@{/changeprojectstatus}+'?which=2&projectId='+${project.id}+'\')'"
			   style="text-decoration:none">
                <button class="el-button el-button--mini" style="margin: 2px 0;" >开始建设</button>
            </a>
            <a title="结项" href="javascript:;" 
            	th:if="${project.stageCode eq 1001 and project.stageReviewCode eq 1001 and project.getStausCode() eq 1005}"
			   th:onclick="'javascript:finish(this,\'/center/myProject'+@{/changeprojectstatus}+'?which=3&projectId='+${project.id}+'\')'"  style="text-decoration:none">
                <button class="el-button el-button--primary el-button--mini" style="margin: 2px 0;" >结项</button>
			</a>
        </div></td>
       <th class="gutter" style="width: 0px; display: none;"></th>
      </tr>
     </tbody>
    </table>
 <!--    <div class="el-table__empty-block" style="width: 1120px;">
     <span class="el-table__empty-text">暂无数据</span>
    </div> -->
   </div>
   <div class="el-table__column-resize-proxy" style="display: none;"></div>
   <div class="el-loading-mask" style="display: none;">
    <div class="el-loading-spinner">
     <svg viewbox="25 25 50 50" class="circular">
      <circle cx="50" cy="50" r="20" fill="none" class="path"></circle>
     </svg>
     <p class="el-loading-text"></p>
    </div>
   </div>
  </div> 
         <div class="bg-purple" data-v-d0b3a19c="">
          <div class="block" data-v-d0b3a19c="">
<!--            <div class="el-pagination is-background" data-v-d0b3a19c=""> -->
<!--             <span class="el-pagination__total" th:text="'共'+${total}+'条'">共 3 条</span> -->
<!--             <button type="button" class="btn-prev disabled"><a th:href="@{'/myProject?currentPage='+${currentPage - 1}}"><i class="el-icon el-icon-arrow-left"></i></a></button> -->
<!--              <ul class="el-pager"> -->
<!--               <li th:each="i:${#numbers.sequence(1,pages)}" th:class="${i} == ${currentPage} ? 'number active' : ''" class="number active"><a th:href="@{'/myProject?currentPage='+${i}}" th:text="${i}">1</a></li> -->
<!--              </ul> -->
<!--             <button type="button" onclick="next()" class="btn-next disabled"><a th:href="@{'/myProject?currentPage='+${currentPage + 1}}"><i class="el-icon el-icon-arrow-right"></i></a></button> -->
<!--            </div> -->
			<div class="pages_zt" data-v-f669c494>
                <div class="pageDiv"></div>
            </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <!-- 公共底部 -->
      <div th:include="front/common/_footer :: footer" id="footer" data-v-407369c6 data-v-2a183b29></div>
      <!-- 公共js -->
  	  <div th:include="front/common/_js :: js"></div>
     </div>
    </div>
   </div>
  </div>
  <script>
  function admin_edit(title,url,w,h){
		layer_show(title,url,w,h);
	}
  /*项目-发布*/
  function release(obj,url){
  	layer.confirm('确认要发布项目吗？',function(index){
  		$.ajax({
  			type: 'GET',
  			url: url,
  			dataType: 'json',
  			success: function(data){
  				if(data.code == "000000"){
  					layer.msg('发布成功!',{icon:1,time:1000});
  	  	        	setTimeout(function(){  //使用  setTimeout（）方法设定定时2000毫秒
  	  	        		window.location.reload();//页面刷新
  	  	        		},500);
  				}else{
  					layer.msg('发布失败!',{icon:5,time:1000});
  				}
  			},
  			error:function(data) {
  				console.log(data.msg);
  			},
  		});		
  	});
  }
  /*项目-开始建设*/
  function beginBuild(obj,url){
  	layer.confirm('确认要开始建设项目吗？',function(index){
  		$.ajax({
  			type: 'GET',
  			url: url,
  			dataType: 'json',
  			success: function(data){
  				if(data.code == "000000"){
  					layer.msg('项目开始建设成功!',{icon:1,time:1000});
  	  	        	setTimeout(function(){  //使用  setTimeout（）方法设定定时2000毫秒
  	  	        		window.location.reload();//页面刷新
  	  	        		},500);
  				}else{
  					layer.msg('项目开始建设失败!',{icon:5,time:1000});
  				}
  			},
  			error:function(data) {
  				console.log(data.msg);
  			},
  		});		
  	});
  }
  
  /*项目-结项*/
  function finish(obj,url){
  	layer.confirm('确认要结项吗？',function(index){
  		$.ajax({
  			type: 'GET',
  			url: url,
  			dataType: 'json',
  			success: function(data){
  				if(data.code == "000000"){
  					layer.msg('项目结项成功!',{icon:1,time:1000});
  	  	        	setTimeout(function(){  //使用  setTimeout（）方法设定定时2000毫秒
  	  	        		window.location.reload();//页面刷新
  	  	        		},500);
  				}else{
  					layer.msg('项目结项失败!',{icon:5,time:1000});
  				}
  			},
  			error:function(data) {
  				console.log(data.msg);
  			},
  		});		
  	});
  }
  </script>
 </body>
</html>